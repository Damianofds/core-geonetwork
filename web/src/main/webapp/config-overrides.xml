<!-- GeoNetwork customization file --> 

<overrides xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:noNamespaceSchemaLocation="config-overrides.xsd"> 

    <!-- An import can be used if many of the overrides are common between your different configurations --> 
    
    <properties>
        <site.name>GeoNetwork RNDT demo site</site.name>
        <site.org>RNDT GeoNetwork Catalog</site.org>
        <site.host>sr-vm160-sitt1</site.host>
    </properties> 
    
    <!-- <file name="">
            <replaceAtt attName="" value="" xpath=""/>
            <replaceText xpath=""></replaceText>
    </file> -->
    
    <file name=".*/WEB-INF/config.xml">
        <replaceText xpath="general/debug">false</replaceText> 
        
        <replaceXML xpath="resources">
            <resource enabled="true">
                <name>main-db</name>
                <provider>jeeves.resources.dbms.ApacheDBCPool</provider>
                <config>
                    <user>postgres</user>
                    <password>comunefipgsql</password>
                    <driver>org.postgis.DriverWrapper</driver>
                    <url>jdbc:postgresql_postGIS://localhost:5432/geonetwork_new</url>
                    <poolSize>30</poolSize>
                    <validationQuery>SELECT 1</validationQuery>
                </config>
            </resource>
        </replaceXML>
    </file>

    <file name=".*/WEB-INF/config-gui.xml">
        <replaceXML xpath="languages">
            <ita/>
        </replaceXML>

		<replaceXML xpath="map">
			  <!-- Configuration for map displayed in metadata sheet
			  (view or edit mode). -->
			  <metadata>
			   <width>100%</width>
			   <height>300px</height>
			  </metadata>
			  
			  <proj>
				<!-- List all needed projections for view and editing maps.
				If more than one projection is available, bounding box
				coordinates will be displayed in the list of available projection.
				
				Default attribute define the default projection to use. Do
				not define more than one default projection.-->
				<crs code="EPSG:4326" default="1" edit="1"/><!-- WGS84 is mandatory because ISO store it by default in LatLong-->
				<crs code="EPSG:3003" edit="1" def="+proj=tmerc +lat_0=0 +lon_0=9 +k=0.9996 +x_0=1500000 +y_0=0 +ellps=intl +units=m +no_defs "></crs>
				<crs code="EPSG:900913" def="+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs "/>
			  </proj>

			  <!-- Setting used in the new UI (html5ui) to configure the layers in the maps. TODO: Use also in classic UI
				   - If this setting is true OSM is used in the map viewers.
				   - If this setting is false, html5ui uses the layers configured in /geonetwork/maps/mapviewer.wmc
				   You can configure your custom WMS layers in that file.-->
			  <osm_map>true</osm_map>
        </replaceXML>
		
        <replaceXML xpath="municipalitySearch">
			<enabled>true</enabled>
        </replaceXML>
		
		<replaceXML xpath="socialLinks">
			<mapstoreEndPoint>MapStore_test/</mapstoreEndPoint>
			<geonetworkEndPoint>geonetwork_test</geonetworkEndPoint>
			<twitter>
				<hashTags>OpenData</hashTags>
				<text>Metadato%20del%20Comune%20di%20Firenze</text>
			</twitter>
        </replaceXML>

        <!-- visual enhancements for RNDT schema -->
        <addXML xpath="metadata-tab">
           <rndt flat="true">
              <ancestorException schema="iso19139.rndt" for="EX_TemporalExtent,CI_Date,spatialResolution"/>
              <exception schema="iso19139.rndt" for="result,resourceConstraints,pointOfContact,hierarchyLevel,couplingType,operatesOn,distributionInfo,distributionFormat,onLine,identifier,language,characterSet,topicCategory,serviceType,descriptiveKeywords,extent,temporalElement,geographicElement,lineage"/>
           </rndt>
        </addXML>

        <replaceAtt xpath="mapSearch" attName="options" value="{projection: 'EPSG:3003', maxExtent: new OpenLayers.Bounds(1241482.0019,973563.1609,1830078.9331,5215189.0853), units: 'm', restrictedExtent: new OpenLayers.Bounds(1672800,4843200,1688800,4856400), scales: [1000000, 500000, 100000, 50000, 25000, 10000, 5000, 2000, 1000, 500]}"/>

        <replaceXML xpath="mapSearch">
            <layers>
		<layer server="http://wms.comune.fi.it/sfondo" tocName="Sfondo" params="{layers: 'Sfondo', format: 'image/jpeg'}" options="{isBaseLayer: true}" />
            </layers>
        </replaceXML>

        <replaceAtt xpath="mapViewer" attName="options" value="{projection: 'EPSG:4326',  maxExtent: new OpenLayers.Bounds(11.145,43.718,11.348,43.84), units: 'degrees', restrictedExtent: new OpenLayers.Bounds(11.145,43.718,11.348,43.84)}"/>                    
        <replaceXML xpath="mapViewer">
            <layers>
		<layer server="http://wms.comune.fi.it/sfondo" tocName="Sfondo" params="{layers: 'Sfondo', format: 'image/jpeg'}" options="{isBaseLayer: true}" />
            </layers>
            <scales values="[]" />
            <proj>
                <crs code="EPSG:3003" name="Monte Mario Italy 1" />
            </proj>
            <proj>
    		<crs code="EPSG:4326" default="1" name="WGS84 (lat/lon)" />
  	    </proj>
            <servers>
                <server name="NASA JPL OneEarth Web Mapping Server (WMS)" url="http://wms.jpl.nasa.gov/wms.cgi?" />
                <server name="NASA Earth Observations (NEO) WMS" url="http://neowms.sci.gsfc.nasa.gov/wms/wms?" />
                <server name="DEMIS World Map Server" url="http://www2.demis.nl/mapserver/wms.asp?" />
                <server name="Geoserver" url="http://localhost:8082/geoserver/wms?" />
            </servers>
        </replaceXML>
    </file> 
    
</overrides>
